var HttpService=require("montage/data/service/http-service").HttpService,DataService=require("montage/data/service/data-service").DataService,DataSelector=require("montage/data/service/data-selector").DataSelector,WeatherReport=require("../model/weather-report").WeatherReport,WeatherService=exports.WeatherService=HttpService.specialize({API_KEY:{value:"7593a575795cbd73f54c69a321ed86fe"},ENDPOINT:{value:"http://api.openweathermap.org/data/2.5/"},fetchRawData:{value:function(e){var t=this,a=e.selector.criteria;return t.fetchHttpRawData(this._getUrl(a,!0),!1).then(function(r){r&&(t.addRawData(e,[r],a),t.rawDataDone(e))})}},mapFromRawData:{value:function(e,t,a){e.temp=t.main.temp}},_getUrl:{value:function(e,t){var a=e.parameters;return this.ENDPOINT+"weather?q="+a.city+","+a.country+"&units="+a.unit+"&appid="+this.API_KEY}}});